---
title: Crypto with Rstudio
author: ''
date: '2021-11-12'
slug: crypto-with-rstudio
categories:
  - blockchain
tags:
  - blockchain
  - crypto
---

# Crypto2
Package `crypto2`  retrieves crypto currency information and historical prices as well as information on the exchanges they are listed on from (CoinMarketCap)<https://coinmarketcap.com> via their 'web-api'.
```{r}
library(crypto2)
library(tidyverse)

coins <- crypto_list(only_active=TRUE)
coin_info <- crypto_info(coins,limit=3)
coin_info
```
In addition we show tags provided by https://coinmarketcap.com.
```{r}
coin_info %>% 
  select(slug,tags) %>% 
  tidyr::unnest(tags) %>% 
  group_by(slug) %>% 
  slice(1,n())
```
Additionally: Here are some urls pertaining to these coins as provided by https://coinmarketcap.com.
```{r}
coin_info %>% 
  select(slug,urls) %>% 
  tidyr::unnest(urls) %>% 
  filter(name %in% c("reddit","twitter"))
```
In a next step we download time series data for these coins.
```{r}
# retrieve historical data for all (the first 3) of them
coin_hist <- crypto_history(coins, limit=3, start_date="20210101", end_date="20210105")
# and give the first two times of information per coin
coin_hist %>% 
  group_by(slug) %>% 
  slice(1:2)
```
Alternatively, we could determine the price of these coins in other currencies. A list of such currencies is available as fiat_list()
```{r}
fiats <- fiat_list()
fiats
```
So we download the time series again depicting prices in terms of Bitcoin and Euro (note that multiple currencies can be given to convert, separated by “,”).
```{r}
# retrieve historical data for all (the first 3) of them
coin_hist2 <- crypto_history(coins, convert="BTC,EUR", limit=3, start_date="20210101", end_date="20210105")

# and give the first two times of information per coin
coin_hist2 %>% 
  group_by(slug,ref_cur) %>% 
  slice(1:2)
```
Last and least, one can get information on exchanges. For this download a list of active/inactive/untracked exchanges using exchange_list():
```{r}
exchanges <- exchange_list(only_active=TRUE)
exchanges
```
and then download information on “binance” and “kraken”:
```{r}
ex_info <- exchange_info(exchanges %>% 
                           filter(slug %in% c('binance','kraken')))
ex_info
```
Then we can access information on the fee structure,
```{r}
ex_info %>% 
  select(contains("fee"))
```
the amount of cryptocurrencies being traded (in USD)
```{r}
ex_info %>% 
  select(contains("spot"))
```


# Tidyquant

```{r}
library(tidyquant)
tiingo_api_key('86771cb62164b5be7a3cbb13db57cf4c8ac4e251')
# Tiingo Bitcoin in USD ----
tq_get(c("btcusd"),
       get    = "tiingo.crypto",
       from   = "2021-03-01",
       to     = "2021-11-10",
       resample_frequency = "1day") %>% 
  ggplot(aes(x = date, y = close)) +
    geom_candlestick(aes(open = open, high = high, low = low, close = close)) +
    labs(title = "AAPL Candlestick Chart", y = "Closing Price", x = "") +
    theme_tq()

```

